name: Test Dependency Security Review

on:
  pull_request:

permissions:
  contents: read
  pull-requests: write

jobs:
  dependency-review:
    name: Dependency Security Review
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Run dependency review
        uses: ./
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          dependency: "github.com/lib/pq 1.10.0..1.10.9,golang.org/x/net 0.21.0..0.23.0,serde 1.0.196..1.0.197,tokio 1.36.0..1.37.0"
          model: sonnet
          max_turns: 50
